{"version":3,"sources":["redux/actions/types.js","redux/reducers/search.reducer.js","redux/reducers/movie.reducer.js","redux/reducers/root.reducer.js","store.js","components/image-modal/ImageModal.jsx","components/movie-card/MovieCard.jsx","pages/Search.jsx","redux/actions/search.action.js","pages/Detail.jsx","redux/actions/movie.action.js","App.jsx","index.js"],"names":["SEARCH_MOVIES","SEARCH_MOVIES_FAILED","GET_MORE_RESULTS","GET_DETAIL","GET_DETAIL_FAILED","CLEAR_DETAIL","initialState","movies","loading","hasMore","error","searchReducer","state","action","type","payload","Search","totalResults","length","movie","movieReducer","rootReducer","combineReducers","searchRes","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","ImageModal","image","setModal","className","onClick","e","src","alt","MovieCard","Title","Year","imdbID","Poster","useState","modal","to","connect","list","searchMovies","title","dispatch","a","axios","get","res","data","getMoreResults","page","setTitle","setPage","observer","useRef","lastMovieElement","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useEffect","movieList","onSubmit","preventDefault","onChange","target","value","placeholder","map","index","ref","getMovieDetails","id","clearDetailPage","match","console","log","params","Plot","App","exact","path","component","Detail","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qRAAaA,EAAgB,gBAChBC,EAAuB,uBACvBC,EAAmB,mBACnBC,EAAa,aACbC,EAAoB,oBACpBC,EAAe,eCCtBC,EAAe,CACjBC,OAAQ,GACRC,SAAS,EACTC,SAAS,EACTC,MAAO,IAmCIC,EAhCO,WAAmC,IAAlCC,EAAiC,uDAAzBN,EAAcO,EAAW,uCAC5CC,EAAkBD,EAAlBC,KAAMC,EAAYF,EAAZE,QAEd,OAAQD,GACJ,KAAKd,EACD,OAAO,2BACAY,GADP,IAEIL,OAAQQ,EAAQC,OAChBP,QAASM,EAAQE,aAAe,GAChCT,SAAS,IAEjB,KAAKN,EACD,OAAO,2BACAU,GADP,IAEIL,OAAO,GAAD,mBAAMK,EAAML,QAAZ,YAAuBQ,EAAQC,SACrCP,QAASG,EAAML,OAAOW,OAASH,EAAQE,aACvCT,SAAS,IAEjB,KAAKP,EACD,OAAO,2BACAW,GADP,IAEIF,MAAOK,EACPP,SAAS,IAGjB,QACI,OAAO,eACAI,KClCbN,EAAe,CACjBa,MAAO,GACPX,SAAS,EACTE,MAAO,IAiCIU,EA9BM,WAAmC,IAAlCR,EAAiC,uDAAzBN,EAAcO,EAAW,uCAC3CC,EAAkBD,EAAlBC,KAAMC,EAAYF,EAAZE,QAEd,OAAQD,GACJ,KAAKX,EACD,OAAO,2BACAS,GADP,IAEIO,MAAOJ,EACPP,SAAS,IAEjB,KAAKH,EACD,OAAO,2BACAO,GADP,IAEIO,MAAO,GACPX,SAAS,IAEjB,KAAKJ,EACD,OAAO,2BACAQ,GADP,IAEIF,MAAOK,EACPP,SAAS,IAGjB,QACI,OAAO,eACAI,KC5BJS,EALKC,0BAAgB,CAChCC,UAAWZ,EACXQ,MAAOC,ICELI,EAAa,CAACC,KAQLC,EANDC,sBACVN,EALiB,GAOjBO,8BAAoBC,kBAAe,WAAf,EAAmBL,K,wDCH5BM,EARI,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAC3B,OACE,qBAAKC,UAAU,kBAAkBC,QAAS,SAACC,GAAD,OAAOH,GAAS,IAA1D,SACE,qBAAKC,UAAU,cAAcG,IAAKL,EAAOM,IAAI,oBCkBpCC,EAnBG,SAAC,GAAgD,IAAD,IAA7CnB,MAASoB,EAAoC,EAApCA,MAAOC,EAA6B,EAA7BA,KAAMC,EAAuB,EAAvBA,OAAQC,EAAe,EAAfA,OACjD,EAA0BC,oBAAS,GAAnC,mBAAOC,EAAP,KAAcZ,EAAd,KACA,OACE,sBAAKC,UAAU,kBAAf,UACGW,EAAQ,cAAC,EAAD,CAAYb,MAAOW,EAAQV,SAAUA,IAAe,KAC7D,qBACEI,IAAKM,EACLL,IAAI,eACJJ,UAAU,SACVC,QAAS,SAACC,GAAD,OAAOH,GAAS,MAE3B,oBAAIC,UAAU,cAAd,SACE,cAAC,IAAD,CAAMY,GAAE,kBAAaJ,GAArB,SAAgCF,MAElC,oBAAIN,UAAU,aAAd,SAA4BO,QC0FnBM,eAJS,SAAClC,GAAD,MAAY,CAClCmC,KAAMnC,EAAMW,aAG0B,CAAEyB,aCxGd,SAACC,GAAD,8CAAW,WAAMC,GAAN,eAAAC,EAAA,+EAEbC,IAAMC,IAAN,oDAAuDJ,IAF1C,OAEzBK,EAFyB,OAG/BJ,EAAS,CACLpC,KAAMd,EACNe,QAASuC,EAAIC,OALc,gDAQ/BL,EAAS,CACLpC,KAAMb,EACNc,QAAQ,EAAD,KAVoB,yDAAX,uDDwG4ByC,eCzF1B,SAACP,EAAOQ,GAAR,8CAAiB,WAAMP,GAAN,eAAAC,EAAA,+EAErBC,IAAMC,IAAN,oDAAuDJ,EAAvD,iBAAqEQ,IAFhD,OAEjCH,EAFiC,OAGvCJ,EAAS,CACLpC,KAAMZ,EACNa,QAASuC,EAAIC,OALsB,gDAQvCL,EAAS,CACLpC,KAAMb,EACNc,QAAQ,EAAD,KAV4B,yDAAjB,wDDyFf+B,EArGA,SAAC,GAIT,IAHLE,EAGI,EAHJA,aACAQ,EAEI,EAFJA,eAEI,IADJT,KAAQtC,EACJ,EADIA,QAASF,EACb,EADaA,OAAQC,EACrB,EADqBA,QAEzB,EAA0BmC,mBAAS,IAAnC,mBAAOM,EAAP,KAAcS,EAAd,KACA,EAAwBf,mBAAS,GAAjC,mBAAOc,EAAP,KAAaE,EAAb,KAEMC,EAAWC,mBACXC,EAAmBC,uBACvB,SAACC,GACKxD,IACAoD,EAASK,SAASL,EAASK,QAAQC,aACvCN,EAASK,QAAU,IAAIE,sBAAqB,SAACC,GACvCA,EAAQ,GAAGC,gBAAkB5D,GAC/BkD,GAAQ,SAACF,GAAD,OAAUA,EAAO,QAGzBO,GAAMJ,EAASK,QAAQK,QAAQN,MAErC,CAACvD,EAASD,IAIZ+D,qBAAU,WACJd,EAAO,GACTD,EAAeP,EAAOQ,KAGvB,CAACA,IAEJ,IAAIe,EAAY,GACNA,EAAVjE,GAA6C,GAE7C,IAAMkE,EAAQ,uCAAG,WAAOtC,GAAP,SAAAgB,EAAA,sDACfhB,EAAEuC,iBACY,KAAVzB,IACFU,EAAQ,GACRX,EAAaC,IAJA,2CAAH,sDAQd,OACE,sBAAKhB,UAAU,mBAAf,UACE,8CACA,qBAAKA,UAAU,aAAf,SACE,uBAAMA,UAAU,cAAcwC,SAAU,SAACtC,GAAD,OAAOsC,EAAStC,IAAxD,UACE,uBACEF,UAAU,aACV0C,SAAU,SAACxC,GAAD,OAAOuB,EAASvB,EAAEyC,OAAOC,QACnCA,MAAO5B,EACPnC,KAAK,OACLgE,YAAY,2BAEd,wBAAQ,cAAY,gBAAgB7C,UAAU,gBAAgBnB,KAAK,SAAnE,yBAKJ,8BACG0D,EAAUtD,OAAS,EAClBsD,EAAUO,KAAI,SAAC5D,EAAO6D,GACpB,OAAIR,EAAUtD,SAAW8D,EAAQ,EAE7B,qBACE/C,UAAU,iBACVgD,IAAKnB,EAFP,SAKE,cAAC,EAAD,CAAW3C,MAAOA,KAFb6D,EAAQ7D,EAAMoB,OAOrB,qBAAKN,UAAU,iBAAf,SACE,cAAC,EAAD,CAAWd,MAAOA,KADiB6D,EAAQ7D,EAAMoB,UAOzD,gCACE,2CACA,qEE9CGO,eAJS,SAAClC,GAAD,MAAY,CAClCO,MAAOP,EAAMO,SAGyB,CAAE+D,gBCxCX,SAACC,GAAD,8CAAQ,WAAMjC,GAAN,eAAAC,EAAA,+EAEbC,IAAMC,IAAN,oDAAuD8B,IAF1C,OAEzB7B,EAFyB,OAG/BJ,EAAS,CACLpC,KAAMX,EACNY,QAASuC,EAAIC,OALc,gDAQ/BL,EAAS,CACLpC,KAAMV,EACNW,QAAQ,EAAD,KAVoB,yDAAR,uDDwC4BqE,gBCzB5B,yDAAM,WAAMlC,GAAN,SAAAC,EAAA,sDACjCD,EAAS,CACLpC,KAAMT,IAFuB,2CAAN,wDDyBhByC,EAlCA,SAAC,GAKT,IAJLuC,EAII,EAJJA,MACAH,EAGI,EAHJA,gBACAE,EAEI,EAFJA,gBACSjE,EACL,EADJA,MAASA,MAWT,OATAmE,QAAQC,IAAIpE,GACZoD,qBAAU,WAER,OADAW,EAAgBG,EAAMG,OAAOL,IACtB,WACLC,OAGD,IAGD,sBAAK,cAAY,mBAAmBnD,UAAU,mBAA9C,UACE,6BAAKd,EAAMoB,QACX,6BAAKpB,EAAMqB,OACX,4BAAIrB,EAAMsE,OACV,qBAAKrD,IAAKjB,EAAMuB,OAAQL,IAAI,KAC5B,cAAC,IAAD,CAAMQ,GAAG,IAAT,kCELS6C,MAff,WACE,OACE,cAAC,IAAD,CAAUhE,MAAOA,EAAjB,SACE,cAAC,IAAD,UACE,eAAC,WAAD,WACE,cAAC,IAAD,CAAOiE,OAAK,EAACC,KAAK,IAAIC,UAAW7E,IACjC,cAAC,IAAD,UACE,cAAC,IAAD,CAAO2E,OAAK,EAACC,KAAK,cAAcC,UAAWC,cCbvDC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.9f3810e9.chunk.js","sourcesContent":["export const SEARCH_MOVIES = \"SEARCH_MOVIES\";\r\nexport const SEARCH_MOVIES_FAILED = \"SEARCH_MOVIES_FAILED\";\r\nexport const GET_MORE_RESULTS = \"GET_MORE_RESULTS\";\r\nexport const GET_DETAIL = \"GET_DETAIL\";\r\nexport const GET_DETAIL_FAILED = \"GET_DETAIL_FAILED\";\r\nexport const CLEAR_DETAIL = \"CLEAR_DETAIL\";\r\n\r\n","import {\r\n    SEARCH_MOVIES,\r\n    SEARCH_MOVIES_FAILED,\r\n    GET_MORE_RESULTS\r\n} from \"../actions/types\"\r\n\r\nconst initialState = {\r\n    movies: [],\r\n    loading: true,\r\n    hasMore: false,\r\n    error: {}\r\n}\r\n\r\nconst searchReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case SEARCH_MOVIES:\r\n            return {\r\n                ...state,\r\n                movies: payload.Search,\r\n                hasMore: payload.totalResults > 10,\r\n                loading: false\r\n            }\r\n        case GET_MORE_RESULTS:\r\n            return {\r\n                ...state,\r\n                movies: [...state.movies, ...payload.Search],\r\n                hasMore: state.movies.length < payload.totalResults,\r\n                loading: false\r\n            }\r\n        case SEARCH_MOVIES_FAILED:\r\n            return {\r\n                ...state,\r\n                error: payload,\r\n                loading: false\r\n            }\r\n\r\n        default:\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}\r\n\r\nexport default searchReducer;","import {\r\n    GET_DETAIL,\r\n    GET_DETAIL_FAILED,\r\n    CLEAR_DETAIL\r\n} from \"../actions/types\"\r\n\r\nconst initialState = {\r\n    movie: [],\r\n    loading: true,\r\n    error: {}\r\n}\r\n\r\nconst movieReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case GET_DETAIL:\r\n            return {\r\n                ...state,\r\n                movie: payload,\r\n                loading: false\r\n            }\r\n        case CLEAR_DETAIL:\r\n            return {\r\n                ...state,\r\n                movie: [],\r\n                loading: false\r\n            }\r\n        case GET_DETAIL_FAILED:\r\n            return {\r\n                ...state,\r\n                error: payload,\r\n                loading: false\r\n            }\r\n\r\n        default:\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}\r\n\r\nexport default movieReducer;","import { combineReducers } from 'redux';\r\nimport searchReducer from './search.reducer';\r\nimport movieReducer from './movie.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    searchRes: searchReducer,\r\n    movie: movieReducer,\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport rootReducer from \"./redux/reducers/root.reducer\";\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;","import React from \"react\";\r\n\r\nconst ImageModal = ({ image, setModal }) => {\r\n  return (\r\n    <div className=\"modal-container\" onClick={(e) => setModal(false)}>\r\n      <img className=\"image-modal\" src={image} alt=\"Movie Poster\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageModal;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ImageModal from \"../image-modal/ImageModal\";\r\n\r\nconst MovieCard = ({ movie: { Title, Year, imdbID, Poster } }) => {\r\n  const [modal, setModal] = useState(false);\r\n  return (\r\n    <div className=\"movie-container\">\r\n      {modal ? <ImageModal image={Poster} setModal={setModal} /> : null}\r\n      <img\r\n        src={Poster}\r\n        alt=\"Movie Poster\"\r\n        className=\"poster\"\r\n        onClick={(e) => setModal(true)}\r\n      />\r\n      <h3 className=\"movie-title\">\r\n        <Link to={`/detail/${imdbID}`}>{Title}</Link>\r\n      </h3>\r\n      <h4 className=\"movie-year\">{Year}</h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieCard;\r\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { searchMovies, getMoreResults } from \"../redux/actions/search.action\";\r\n\r\nimport MovieCard from \"../components/movie-card/MovieCard\";\r\n\r\nconst Search = ({\r\n  searchMovies,\r\n  getMoreResults,\r\n  list: { hasMore, movies, loading },\r\n}) => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n\r\n  const observer = useRef();\r\n  const lastMovieElement = useCallback(\r\n    (node) => {\r\n      if (loading) return;\r\n      if (observer.current) observer.current.disconnect();\r\n      observer.current = new IntersectionObserver((entries) => {\r\n        if (entries[0].isIntersecting && hasMore) {\r\n          setPage((page) => page + 1);\r\n        }\r\n      });\r\n      if (node) observer.current.observe(node);\r\n    },\r\n    [hasMore, loading]\r\n  );\r\n\r\n  // Populate data with infinite scrolling\r\n  useEffect(() => {\r\n    if (page > 1) {\r\n      getMoreResults(title, page);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  let movieList = [];\r\n  movies ? (movieList = movies) : (movieList = []);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (title !== \"\") {\r\n      setPage(1);\r\n      searchMovies(title);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-container\">\r\n      <h1>Find a Movie</h1>\r\n      <div className=\"form-group\">\r\n        <form className=\"search-form\" onSubmit={(e) => onSubmit(e)}>\r\n          <input\r\n            className=\"search-bar\"\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            value={title}\r\n            type=\"text\"\r\n            placeholder=\"Enter a Movie Title...\"\r\n          />\r\n          <button data-testid=\"search-button\" className=\"search-submit\" type=\"submit\">\r\n            Search\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <div>\r\n        {movieList.length > 0 ? (\r\n          movieList.map((movie, index) => {\r\n            if (movieList.length === index + 1) {\r\n              return (\r\n                <div\r\n                  className=\"card-container\"\r\n                  ref={lastMovieElement}\r\n                  key={index + movie.Title}\r\n                >\r\n                  <MovieCard movie={movie} />\r\n                </div>\r\n              );\r\n            } else {\r\n              return (\r\n                <div className=\"card-container\" key={index + movie.Title}>\r\n                  <MovieCard movie={movie} />\r\n                </div>\r\n              );\r\n            }\r\n          })\r\n        ) : (\r\n          <div>\r\n            <h1>No Movies</h1>\r\n            <h2>Search movies to display</h2>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nSearch.propTypes = {\r\n  list: PropTypes.object.isRequired,\r\n  searchMovies: PropTypes.func.isRequired,\r\n  getMoreResults: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  list: state.searchRes,\r\n});\r\n\r\nexport default connect(mapStateToProps, { searchMovies, getMoreResults })(\r\n  Search\r\n);\r\n","import axios from 'axios'\r\n\r\nimport { SEARCH_MOVIES, SEARCH_MOVIES_FAILED, GET_MORE_RESULTS } from \"./types\";\r\n\r\nexport const searchMovies = (title) => async dispatch => {\r\n    try {\r\n        const res = await axios.get(`http://www.omdbapi.com/?apikey=2a818054&s=${title}`);\r\n        dispatch({\r\n            type: SEARCH_MOVIES,\r\n            payload: res.data\r\n        })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: SEARCH_MOVIES_FAILED,\r\n            payload: err\r\n        })\r\n    }\r\n}\r\n\r\nexport const getMoreResults = (title, page) => async dispatch => {\r\n    try {\r\n        const res = await axios.get(`http://www.omdbapi.com/?apikey=2a818054&s=${title}&page=${page}`);\r\n        dispatch({\r\n            type: GET_MORE_RESULTS,\r\n            payload: res.data\r\n        })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: SEARCH_MOVIES_FAILED,\r\n            payload: err\r\n        })\r\n    }\r\n}","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {\r\n  getMovieDetails,\r\n  clearDetailPage,\r\n} from \"../redux/actions/movie.action\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Detail = ({\r\n  match,\r\n  getMovieDetails,\r\n  clearDetailPage,\r\n  movie: { movie },\r\n}) => {\r\n  console.log(movie);\r\n  useEffect(() => {\r\n    getMovieDetails(match.params.id);\r\n    return () => {\r\n      clearDetailPage();\r\n    };\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div data-testid=\"detail-container\" className=\"search-container\">\r\n      <h1>{movie.Title}</h1>\r\n      <h2>{movie.Year}</h2>\r\n      <p>{movie.Plot}</p>\r\n      <img src={movie.Poster} alt=\"\" />\r\n      <Link to=\"/\">Back to Search</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nDetail.propTypes = {\r\n  getMovieDetails: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  movie: state.movie,\r\n});\r\n\r\nexport default connect(mapStateToProps, { getMovieDetails, clearDetailPage })(\r\n  Detail\r\n);\r\n","import axios from 'axios'\r\n\r\nimport { GET_DETAIL, GET_DETAIL_FAILED, CLEAR_DETAIL } from \"./types\";\r\n\r\nexport const getMovieDetails = (id) => async dispatch => {\r\n    try {\r\n        const res = await axios.get(`http://www.omdbapi.com/?apikey=2a818054&i=${id}`);\r\n        dispatch({\r\n            type: GET_DETAIL,\r\n            payload: res.data\r\n        })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GET_DETAIL_FAILED,\r\n            payload: err\r\n        })\r\n    }\r\n}\r\n\r\nexport const clearDetailPage = () => async dispatch => {\r\n    dispatch({\r\n        type: CLEAR_DETAIL,\r\n    })\r\n}","import { Fragment } from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\n// Redux\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nimport Search from \"./pages/Search\";\nimport Detail from \"./pages/Detail\";\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <Fragment>\n          <Route exact path=\"/\" component={Search} />\n          <Switch>\n            <Route exact path=\"/detail/:id\" component={Detail} />\n          </Switch>\n        </Fragment>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}