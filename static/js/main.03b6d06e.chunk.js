(this["webpackJsonpmovie-finder"]=this["webpackJsonpmovie-finder"]||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(20),i=a.n(r),s=(a(42),a(43),a(13)),o=a(3),u=a(14),l=a(15),j=a(36),d=a(37),b=a(27),h=a(4),p="SEARCH_MOVIES",v="SEARCH_MOVIES_FAILED",O="GET_MORE_RESULTS",m="GET_DETAIL",f="GET_DETAIL_FAILED",x="CLEAR_DETAIL",g={movies:[],loading:!0,hasMore:!1,error:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case p:return Object(h.a)(Object(h.a)({},e),{},{movies:c.Search,hasMore:c.totalResults>10,loading:!1});case O:return Object(h.a)(Object(h.a)({},e),{},{movies:[].concat(Object(b.a)(e.movies),Object(b.a)(c.Search)),hasMore:e.movies.length<c.totalResults,loading:!1});case v:return Object(h.a)(Object(h.a)({},e),{},{error:c,loading:!1});default:return Object(h.a)({},e)}},w={movie:[],loading:!0,error:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case m:return Object(h.a)(Object(h.a)({},e),{},{movie:c,loading:!1});case x:return Object(h.a)(Object(h.a)({},e),{},{movie:[],loading:!1});case f:return Object(h.a)(Object(h.a)({},e),{},{error:c,loading:!1});default:return Object(h.a)({},e)}},E=Object(l.combineReducers)({searchRes:y,movie:M}),k=[d.a],S=Object(l.createStore)(E,{},Object(j.composeWithDevTools)(l.applyMiddleware.apply(void 0,k))),N=a(7),R=a.n(N),T=a(11),D=a(19),I=a(18),_=a.n(I),A=a(1),C=function(e){var t=e.image,a=e.setModal;return Object(A.jsx)("div",{className:"modal-container",onClick:function(e){return a(!1)},children:Object(A.jsx)("img",{className:"image-modal",src:t,alt:"Movie Poster"})})},L=function(e){var t=e.movie,a=t.Title,n=t.Year,r=t.imdbID,i=t.Poster,o=Object(c.useState)(!1),u=Object(D.a)(o,2),l=u[0],j=u[1];return Object(A.jsxs)("div",{className:"movie-container",children:[l?Object(A.jsx)(C,{image:i,setModal:j}):null,Object(A.jsx)("img",{src:i,alt:"Movie Poster",className:"poster",onClick:function(e){return j(!0)}}),Object(A.jsx)("h3",{className:"movie-title",children:Object(A.jsx)(s.b,{to:"/detail/".concat(r),children:a})}),Object(A.jsx)("h4",{className:"movie-year",children:n})]})},P=Object(u.b)((function(e){return{list:e.searchRes}}),{searchMovies:function(e){return function(){var t=Object(T.a)(R.a.mark((function t(a){var c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://www.omdbapi.com/?apikey=2a818054&s=".concat(e));case 3:c=t.sent,a({type:p,payload:c.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:v,payload:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},getMoreResults:function(e,t){return function(){var a=Object(T.a)(R.a.mark((function a(c){var n;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_.a.get("http://www.omdbapi.com/?apikey=2a818054&s=".concat(e,"&page=").concat(t));case 3:n=a.sent,c({type:O,payload:n.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),c({type:v,payload:a.t0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.searchMovies,a=e.getMoreResults,n=e.list,r=n.hasMore,i=n.movies,s=n.loading,o=Object(c.useState)(""),u=Object(D.a)(o,2),l=u[0],j=u[1],d=Object(c.useState)(1),b=Object(D.a)(d,2),h=b[0],p=b[1],v=Object(c.useRef)(),O=Object(c.useCallback)((function(e){s||(v.current&&v.current.disconnect(),v.current=new IntersectionObserver((function(e){e[0].isIntersecting&&r&&p((function(e){return e+1}))})),e&&v.current.observe(e))}),[r,s]);Object(c.useEffect)((function(){h>1&&a(l,h)}),[h]);var m=[];m=i||[];var f=function(){var e=Object(T.a)(R.a.mark((function e(a){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),""!==l&&(p(1),t(l));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"search-container",children:[Object(A.jsx)("h1",{children:"Find a Movie"}),Object(A.jsx)("div",{className:"form-group",children:Object(A.jsxs)("form",{className:"search-form",onSubmit:function(e){return f(e)},children:[Object(A.jsx)("input",{className:"search-bar",onChange:function(e){return j(e.target.value)},value:l,type:"text",placeholder:"Enter a Movie Title..."}),Object(A.jsx)("button",{"data-testid":"search-button",className:"search-submit",type:"submit",children:"Search"})]})}),Object(A.jsx)("div",{children:m.length>0?m.map((function(e,t){return m.length===t+1?Object(A.jsx)("div",{className:"card-container",ref:O,children:Object(A.jsx)(L,{movie:e})},t+e.Title):Object(A.jsx)("div",{className:"card-container",children:Object(A.jsx)(L,{movie:e})},t+e.Title)})):Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"No Movies"}),Object(A.jsx)("h2",{children:"Search movies to display"})]})})]})})),F=Object(u.b)((function(e){return{movie:e.movie}}),{getMovieDetails:function(e){return function(){var t=Object(T.a)(R.a.mark((function t(a){var c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("http://www.omdbapi.com/?apikey=2a818054&i=".concat(e));case 3:c=t.sent,a({type:m,payload:c.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:f,payload:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},clearDetailPage:function(){return function(){var e=Object(T.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:x});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.match,a=e.getMovieDetails,n=e.clearDetailPage,r=e.movie.movie;return console.log(r),Object(c.useEffect)((function(){return a(t.params.id),function(){n()}}),[]),Object(A.jsxs)("div",{"data-testid":"detail-container",className:"search-container",children:[Object(A.jsx)("h1",{children:r.Title}),Object(A.jsx)("h2",{children:r.Year}),Object(A.jsx)("p",{children:r.Plot}),Object(A.jsx)("img",{src:r.Poster,alt:""}),Object(A.jsx)(s.b,{to:"/",children:"Back to Search"})]})}));var G=function(){return Object(A.jsx)(u.a,{store:S,children:Object(A.jsx)(s.a,{basename:"/movie-finder",children:Object(A.jsxs)(c.Fragment,{children:[Object(A.jsx)(o.a,{exact:!0,path:"/",component:P}),Object(A.jsx)(o.c,{children:Object(A.jsx)(o.a,{exact:!0,path:"/detail/:id",component:F})})]})})})};i.a.render(Object(A.jsx)(n.a.StrictMode,{children:Object(A.jsx)(G,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.03b6d06e.chunk.js.map